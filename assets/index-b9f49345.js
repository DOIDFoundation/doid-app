import{T as b}from"./index-ceb35218.js";import{a as x,b as w,c as _,d as C,w as O,r as $,g as P}from"./doid-symbol-6e77b218.js";import{y as o,d as D,t as l,f as u,e as v,n as m}from"./vendor-f2fce57d.js";const R=async(s,t,r="")=>{const[i,e,n]=await Promise.all([x(),w(),w()]),a=await _(),y=C();return t||(t=e),i.connect(a),parseInt(y,16)===0?i.makeCommitment(s,t,r):i.makeCommitment(s,t,r,y,e)},j=`ol{margin-top:1rem;margin-bottom:1rem;display:grid;grid-gap:1rem;gap:1rem}@media (min-width: 768px){ol{grid-template-columns:repeat(3,minmax(0,1fr))}}ol li{position:relative;display:inline-flex;flex-direction:column;gap:1rem;border-radius:.375rem;--tw-bg-opacity: 1;background-color:rgba(243,244,246,var(--tw-bg-opacity));padding:1.25rem 1rem 1rem 3.5rem}ol li:before{position:absolute;left:.75rem;top:.75rem;display:flex;height:2rem;width:2rem;align-items:center;justify-content:center;border-radius:9999px;border-width:1px;--tw-bg-opacity: 1;background-color:rgba(255,255,255,var(--tw-bg-opacity));font-weight:700}ol li.active{--tw-bg-opacity: 1;background-color:rgba(226,232,240,var(--tw-bg-opacity))}ol li.active:before{--tw-border-opacity: 1;border-color:rgba(148,163,184,var(--tw-border-opacity))}ol li>b{display:block}ol li:nth-child(1):before{content:"1"}ol li:nth-child(2):before{content:"2"}ol li:nth-child(3):before{content:"3"}
`;var k=Object.defineProperty,q=Object.getOwnPropertyDescriptor,h=(s,t,r,i)=>{for(var e=i>1?void 0:i?q(t,r):t,n=s.length-1,a;n>=0;n--)(a=s[n])&&(e=(i?a(t,r,e):a(e))||e);return i&&e&&k(t,r,e),e};let c=class extends b(j){constructor(){super(...arguments),this.name="",this.pending=!1,this.ts=0,this.step=1,this.get=async()=>{this.ts++},this.commit=async()=>{R(this.name)}}get empty(){return!1}connectedCallback(){this.get(),super.connectedCallback()}render(){return o`<div class="px-3"><h3 class="text-base">Registering a name requires you to complete 3 steps</h3><ol><li class="${D({active:this.step===1})}"><b>Request to register</b><p>Your wallet will open and you will be asked to confirm the first of two transactions required for registration. If the second transaction is not processed within 7 days of the first, you will need to start again from step 1.</p></li><li><b>Wait for 1 minute</b><p>The waiting period is required to ensure another person hasn’t tried to register the same name and protect you after your request.</p></li><li><b>Complete Registration</b><p>Click ‘register’ and your wallet will re-open. Only after the 2nd transaction is confirmed you'll know if you got the name.</p></li></ol><p class="text-center"><dui-button @click="${this.commit}">Request to Register</dui-button></p></div>`}};h([u()],c.prototype,"name",2);h([l()],c.prototype,"pending",2);h([l()],c.prototype,"ts",2);h([l()],c.prototype,"step",2);c=h([v("view-name-register")],c);const T="";var A=Object.defineProperty,N=Object.getOwnPropertyDescriptor,f=(s,t,r,i)=>{for(var e=i>1?void 0:i?N(t,r):t,n=s.length-1,a;n>=0;n--)(a=s[n])&&(e=(i?a(t,r,e):a(e))||e);return i&&e&&A(t,r,e),e};let d=class extends b(T){constructor(){super(...arguments),this.name="",this.pending=!1,this.ts=0,this.get=async()=>{this.ts++}}get empty(){return!1}connectedCallback(){this.get(),super.connectedCallback()}render(){return o`<div class="px-3">Details for ${this.name}</div>`}};f([u()],d.prototype,"name",2);f([l()],d.prototype,"pending",2);f([l()],d.prototype,"ts",2);d=f([v("view-name-details")],d);const S=`:host::part(dui-nav){display:flex;margin-bottom:-2px}
`;var V=Object.defineProperty,I=Object.getOwnPropertyDescriptor,g=(s,t,r,i)=>{for(var e=i>1?void 0:i?I(t,r):t,n=s.length-1,a;n>=0;n--)(a=s[n])&&(e=(i?a(t,r,e):a(e))||e);return i&&e&&V(t,r,e),e};let p=class extends b(S){constructor(){super(...arguments),this.name="",this.action="",this.pending=!1,this.ts=0,this.get=async()=>{const s=O(this.name);this.name&&!this.action&&$(`/name/${this.name}/register`),s!==this.name&&$(`/name/${s}/${this.action}`),this.ts++}}get inReg(){return this.name&&this.action==="register"}get inDetails(){return this.name&&this.action==="details"}get empty(){return!this.name}connectedCallback(){this.get(),super.connectedCallback()}render(){return o`<div class="view-name"><div class="dui-container"><dui-ns-search .text="${this.name}" @search="${s=>P(`/search/${s.detail}`)}" placeholder="Search names"><span slot="label"></span> <span slot="msgd"></span></dui-ns-search>${m(this.pending,()=>o`<i class="mdi mdi-loading"></i> Searching...`)} ${m(this.name,()=>o`<div class="border-b-2 flex my-4 px-3 pr-4 justify-between"><div><b>${this.name}</b> ${m(this.name==="doid",()=>o`<em>(Registrant)</em>`)}</div><div><dui-nav slot="center" part="dui-nav"><dui-link href="${`/name/${this.name}/register`}" alias="${`/name/${this.name}`}" exact nav>Register</dui-link><dui-link href="${`/name/${this.name}/details`}" exact nav>Details</dui-link></dui-nav></div></div>`)} ${m(this.inReg,()=>o`<view-name-register .name="${this.name}"></view-name-register>`)} ${m(this.inDetails,()=>o`<view-name-details .name="${this.name}"></view-name-details>`)}</div></div>`}};g([u()],p.prototype,"name",2);g([u()],p.prototype,"action",2);g([l()],p.prototype,"pending",2);g([l()],p.prototype,"ts",2);p=g([v("view-name")],p);export{p as ViewName};
